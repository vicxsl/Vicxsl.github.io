---
title: Spring
article: false
date: 2021-11-11 18:55:16
permalink: /mind/494cc9/
pageClass: custom-page-class
---

# Spring
```markmap
# Spring
* 概述`解决企业级应用开发的复杂性，即简化Java开发`
	- 设计思想
		- 基于POJO的轻量级和最小侵入性编程
		- 通过依赖注入和面向接口实现松耦合
		- 基于切面和惯例进行声明式编程
		- 通过切面和模板减少样板式代码
	- 核心
		- ioc容器`管理POJO对象`
		- AOP模块`动态增强服务`
	- 优点
		- 方便解耦，简化开发
		- AOP编程的支持
		- 声明式事务的支持
		- Junit方便程序的测试
		- 集成各种优秀框架
	- 缺点
		- Spring明明一个很轻量级的框架，却给人感觉大而全
		- 依赖反射，影响性能
- 模块
	- spring core
		- 控制反转（Inversion of Control，IOC）
		- 依赖注入（Dependency Injection，DI）
	- spring beans
		- BeanFactory 工厂模式
	- spring context`提供了一种框架式的对象访问方法`
	- spring jdbc `简化jdbc`
	- spring aop
		- 拦截器
		- 切点
	- spring Web  `Web 开发的集成特性`
	- spring test `提供测试支持`
- 设计模式
	- 工厂模式：BeanFactory就是简单工厂模式的体现，用来创建对象的实例
	- 单例模式：Bean默认为单例模式
	- 代理模式：Spring的AOP功能用到了JDK的动态代理和CGLIB字节码生成技术
	- 模板方法：用来解决代码重复的问题
		- RestTemplate
	- 观察者模式：`定义对象键一种一对多的依赖关系`
- 详解
	- Spring控制反转(IOC)`程序代码直接操控的对象的调用权交给容器`
		- 功能
			- 依赖注入
			- 依赖检查
			- 自动装配
			- 支持集合
			- 指定初始化和销毁方法
			- 支持回调方法
		- 流程
			- 加载配置，解析Bean定义
			- 调用时实例化对象
				- 处理依赖关系
		- 接口容器
			- BeanFactory`Spring里面最底层的接口`
				- 延迟加载形式来注入Bean
				- ApplicationContext`应用上下文，更高级的容器`
					- 一次性创建了所有的Bean
						- 比较占用内存
		- Spring的依赖注入(DI)`管理组件之间的依赖关系`
			- 构造器注入
			- Setter方法注入
	- Spring Beans`被Spring IOC容器初始化的java对象`
		- 配置方式
			- XML配置文件
			- 基于注解的配置
			- 基于Java的配置
		- 作用域
			- singleton（默认） : `bean在每个Spring ioc 容器中只有一个实例`
			- prototype（频繁的创建销毁让费性能）：一个bean的定义可以有多个实例。
			- request：每次http请求都会创建一个bean
			- session：在一个HTTP Session中，一个bean定义对应一个实例。
			- global-session：在一个全局的HTTP Session中，一个bean定义对应一个实例。
		- 自动装配
			- 5种自动装配
				- no
				- byName
				- byType
				- constructor
				- autodetect
		- 注解
			- @Autowied`按照类型装配注入的`
			- @Resource`按照名称来装配注入`
			- @Inject
	- Spring注解
		- @Required`自动装配`
		- @Component,
		- @Controller
		- @Repository
		- @Service
		- @RequestMapping 映射请求的 URL
	- Spring面向切面编程（AOP）`抽取并封装为一个可重用的模块（切面）`
		- 实现原理
			- AspectJ静态代理：`编译时将切面织入java字节码`
			- Spring AOP动态代理`运行时临时生成对象`
				- JDK动态代理`实现InvocationHandler接口`
				- CGLIB动态代理`指定类的一个子类`
		- 名词
			- 切面（Aspect）：切面是通知和切点的结合
			- 通知（Advice）：在AOP术语中，切面的工作被称为通知。
			- 连接点（Join point）：应用执行过程中能够插入切面的一个点（方法）
			- 切入点（Pointcut）切点的定义会匹配通知所要织入的一个或多个连接点。
		- Spring通知有哪些类型
			- 前置通知（Before）：在目标方法被调用之前调用通知功能
			- 后置通知（After）：在目标方法完成之后调用通知，此时不会关心方法的输出是什么
			- 返回通知（After-returning ）：在目标方法成功执行之后调用通知
			- 异常通知（After-throwing）：在目标方法抛出异常后调用通知
			- 环绕通知（Around）：通知包裹了被通知的方法
		- 实现方式
			- XML Schema方式的切面实现
			- 基于注解的切面(基于@AspectJ的实现)
```